{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport anecdoteService from '../services/anecdotes'; // const anecdotesAtStart = [];\n\nconst getId = () => (100000 * Math.random()).toFixed(0); // const asObject = (anecdote) => {\n//   return {\n//     content: anecdote,\n//     id: getId(),\n//     votes: 0\n//   }\n// }\n\n\nconst orderAnecdotes = anecdotes => anecdotes.sort((anecdoteA, anecdoteB) => anecdoteB.votes - anecdoteA.votes); // const initialState = orderAnecdotes(anecdotesAtStart.map(asObject));\n\n\nconst anecdoteSlice = createSlice({\n  name: 'anecdotes',\n  initialState: [],\n  reducers: {\n    async newAnecdote(state, action) {\n      const addedAnecdote = anecdoteService.createNew(action.payload);\n      return orderAnecdotes([...state, addedAnecdote]);\n    },\n\n    addVote(state, action) {\n      const id = action.payload;\n      const anecdoteToChange = state.find(anecdote => anecdote.id === id);\n      const changedAnecdote = { ...anecdoteToChange,\n        votes: anecdoteToChange.votes + 1\n      };\n      return orderAnecdotes(state.map(anecdote => anecdote.id === id ? changedAnecdote : anecdote));\n    },\n\n    appendAnecdote(state, action) {\n      state.push(action.payload);\n    },\n\n    setAnecdotes(_state, action) {\n      return action.payload;\n    }\n\n  }\n});\nexport const {\n  newAnecdote,\n  addVote,\n  appendAnecdote,\n  setAnecdotes\n} = anecdoteSlice.actions;\nexport default anecdoteSlice.reducer;","map":{"version":3,"sources":["/home/missy/full_stack_open_course/part6/anecdotes/src/reducers/anecdoteReducer.js"],"names":["createSlice","anecdoteService","getId","Math","random","toFixed","orderAnecdotes","anecdotes","sort","anecdoteA","anecdoteB","votes","anecdoteSlice","name","initialState","reducers","newAnecdote","state","action","addedAnecdote","createNew","payload","addVote","id","anecdoteToChange","find","anecdote","changedAnecdote","map","appendAnecdote","push","setAnecdotes","_state","actions","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,OAAOC,eAAP,MAA4B,uBAA5B,C,CAEA;;AAEA,MAAMC,KAAK,GAAG,MAAM,CAAC,SAASC,IAAI,CAACC,MAAL,EAAV,EAAyBC,OAAzB,CAAiC,CAAjC,CAApB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,cAAc,GAAGC,SAAS,IAC9BA,SAAS,CAACC,IAAV,CAAe,CAACC,SAAD,EAAYC,SAAZ,KACbA,SAAS,CAACC,KAAV,GAAkBF,SAAS,CAACE,KAD9B,CADF,C,CAMA;;;AAEA,MAAMC,aAAa,GAAGZ,WAAW,CAAC;AAChCa,EAAAA,IAAI,EAAE,WAD0B;AAEhCC,EAAAA,YAAY,EAAE,EAFkB;AAGhCC,EAAAA,QAAQ,EAAE;AACR,UAAMC,WAAN,CAAkBC,KAAlB,EAAyBC,MAAzB,EAAiC;AAC/B,YAAMC,aAAa,GAAGlB,eAAe,CAACmB,SAAhB,CAA0BF,MAAM,CAACG,OAAjC,CAAtB;AACA,aAAOf,cAAc,CAAC,CAAC,GAAGW,KAAJ,EAAWE,aAAX,CAAD,CAArB;AACD,KAJO;;AAMRG,IAAAA,OAAO,CAACL,KAAD,EAAQC,MAAR,EAAgB;AACrB,YAAMK,EAAE,GAAGL,MAAM,CAACG,OAAlB;AAEA,YAAMG,gBAAgB,GAAGP,KAAK,CAACQ,IAAN,CAAWC,QAAQ,IAAIA,QAAQ,CAACH,EAAT,KAAgBA,EAAvC,CAAzB;AAEA,YAAMI,eAAe,GAAG,EACtB,GAAGH,gBADmB;AAEtBb,QAAAA,KAAK,EAAEa,gBAAgB,CAACb,KAAjB,GAAyB;AAFV,OAAxB;AAKA,aAAOL,cAAc,CAACW,KAAK,CAACW,GAAN,CAAUF,QAAQ,IACtCA,QAAQ,CAACH,EAAT,KAAgBA,EAAhB,GAAqBI,eAArB,GAAuCD,QADnB,CAAD,CAArB;AAGD,KAnBO;;AAqBRG,IAAAA,cAAc,CAACZ,KAAD,EAAQC,MAAR,EAAgB;AAC5BD,MAAAA,KAAK,CAACa,IAAN,CAAWZ,MAAM,CAACG,OAAlB;AACD,KAvBO;;AAyBRU,IAAAA,YAAY,CAACC,MAAD,EAASd,MAAT,EAAiB;AAC3B,aAAOA,MAAM,CAACG,OAAd;AACD;;AA3BO;AAHsB,CAAD,CAAjC;AAkCA,OAAO,MAAM;AAAEL,EAAAA,WAAF;AAAeM,EAAAA,OAAf;AAAwBO,EAAAA,cAAxB;AAAwCE,EAAAA;AAAxC,IAAyDnB,aAAa,CAACqB,OAA7E;AACP,eAAerB,aAAa,CAACsB,OAA7B","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport anecdoteService from '../services/anecdotes';\n\n// const anecdotesAtStart = [];\n\nconst getId = () => (100000 * Math.random()).toFixed(0)\n\n// const asObject = (anecdote) => {\n//   return {\n//     content: anecdote,\n//     id: getId(),\n//     votes: 0\n//   }\n// }\n\nconst orderAnecdotes = anecdotes => (\n  anecdotes.sort((anecdoteA, anecdoteB) => (\n    anecdoteB.votes - anecdoteA.votes\n  ))\n);\n\n// const initialState = orderAnecdotes(anecdotesAtStart.map(asObject));\n\nconst anecdoteSlice = createSlice({\n  name: 'anecdotes',\n  initialState: [],\n  reducers: {\n    async newAnecdote(state, action) {\n      const addedAnecdote = anecdoteService.createNew(action.payload);\n      return orderAnecdotes([...state, addedAnecdote]);\n    },\n\n    addVote(state, action) {\n      const id = action.payload;\n\n      const anecdoteToChange = state.find(anecdote => anecdote.id === id);\n\n      const changedAnecdote = {\n        ...anecdoteToChange,\n        votes: anecdoteToChange.votes + 1\n      }\n\n      return orderAnecdotes(state.map(anecdote => \n        anecdote.id === id ? changedAnecdote : anecdote\n      ));\n    },\n\n    appendAnecdote(state, action) {\n      state.push(action.payload);\n    },\n\n    setAnecdotes(_state, action) {\n      return action.payload;\n    },\n  },\n})\n\nexport const { newAnecdote, addVote, appendAnecdote, setAnecdotes } = anecdoteSlice.actions;\nexport default anecdoteSlice.reducer;"]},"metadata":{},"sourceType":"module"}